<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr·ª£ l√Ω T·∫°o Ma tr·∫≠n ƒê·ªÅ ki·ªÉm tra - GDPT 2018</title>
    <style>
        :root {
            --primary-text-color: #333; /* M√†u ch·ªØ ch√≠nh */
            --secondary-text-color: #555; /* M√†u ch·ªØ ph·ª• */
            --accent-color: #e74c3c; /* M√†u nh·∫•n, v√≠ d·ª• n√∫t x√≥a */
            --background-light: #f8f8f8; /* N·ªÅn tr·∫Øng x√°m */
            --background-dark: #eee; /* N·ªÅn x√°m nh·∫π */
            --border-color: #333; /* Vi·ªÅn ƒë·∫≠m */
            --shadow-color: rgba(0, 0, 0, 0.8); /* B√≥ng ƒë·ªï ƒë·∫≠m */
            
            /* M√†u s·∫Øc nh·∫π nh√†ng cho c√°c th√†nh ph·∫ßn UI */
            --ui-background-1: #f0f4f8; /* X√°m xanh nh·∫°t */
            --ui-background-2: #e0e7ed; /* X√°m xanh trung b√¨nh */
            --ui-background-3: #e6e6fa; /* T√≠m lavender nh·∫°t */
            --ui-background-4: #fffacd; /* V√†ng chanh nh·∫°t */
            
            --ui-border-1: #aebcc7; /* Vi·ªÅn x√°m xanh */
            
            --ui-button-primary: #607d8b; /* X√°m xanh ƒë·∫≠m cho n√∫t ch√≠nh */
            --ui-button-hover: #455a64; /* X√°m xanh ƒë·∫≠m h∆°n khi hover */
            
            --ui-success: #81c784; /* Xanh l√° c√¢y nh·∫°t */
            --ui-warning: #ffb74d; /* Cam nh·∫°t */
            --ui-info: #90caf9; /* Xanh d∆∞∆°ng nh·∫°t */
            --ui-danger: #ef9a9a; /* ƒê·ªè nh·∫°t */
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--background-light);
            color: var(--primary-text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: var(--ui-background-3); /* S·ª≠ d·ª•ng m√†u t√≠m lavender nh·∫°t */
            color: var(--primary-text-color);
            padding: 20px;
            border: 2px solid var(--border-color);
            box-shadow: 4px 4px 0 var(--shadow-color);
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .app-description {
            background-color: var(--ui-background-4); /* S·ª≠ d·ª•ng m√†u v√†ng chanh nh·∫°t */
            padding: 20px;
            border: 2px solid var(--border-color);
            box-shadow: 4px 4px 0 var(--shadow-color);
            margin-bottom: 25px;
            border-left: 4px solid var(--ui-button-primary);
        }
        
        .form-container {
            background-color: var(--ui-background-1);
            padding: 25px;
            border: 2px solid var(--border-color);
            box-shadow: 4px 4px 0 var(--shadow-color);
            margin-bottom: 30px;
        }
        
        h2 {
            color: var(--primary-text-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-text-color);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 0; /* Neo-brutalism th∆∞·ªùng kh√¥ng c√≥ bo tr√≤n */
            font-size: 16px;
            transition: all 0.1s ease-in-out;
            background-color: white;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--ui-button-primary);
            box-shadow: 2px 2px 0 var(--shadow-color);
        }
        
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }
        
        .col {
            flex: 1;
            padding: 0 10px;
            min-width: 200px;
        }
        
        .percentage-inputs {
            display: flex;
            gap: 15px;
        }
        
        .percentage-inputs .col {
            flex: 1;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--ui-button-primary);
            color: white;
            padding: 12px 25px;
            border: 2px solid var(--border-color);
            border-radius: 0;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.1s ease-in-out;
            text-align: center;
            box-shadow: 2px 2px 0 var(--shadow-color);
        }
        
        .btn:hover {
            background-color: var(--ui-button-hover);
            box-shadow: 4px 4px 0 var(--shadow-color);
            transform: translate(-2px, -2px);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-success {
            background-color: var(--ui-success);
            border-color: var(--border-color);
            color: var(--primary-text-color);
        }
        
        .btn-success:hover {
            background-color: darken(var(--ui-success), 10%);
            border-color: var(--border-color);
        }
        
        .topic-item {
            background-color: var(--ui-background-2); /* S·ª≠ d·ª•ng m√†u x√°m xanh trung b√¨nh */
            border: 2px solid var(--border-color);
            box-shadow: 2px 2px 0 var(--shadow-color);
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .remove-topic {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--ui-danger); /* S·ª≠ d·ª•ng m√†u ƒë·ªè nh·∫°t */
            color: white;
            border: 2px solid var(--border-color);
            border-radius: 0;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            line-height: 1;
            box-shadow: 2px 2px 0 var(--shadow-color);
        }
        
        .cognitive-levels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }
        
        .result-container {
            background-color: var(--ui-background-1);
            padding: 25px;
            border: 2px solid var(--border-color);
            box-shadow: 4px 4px 0 var(--shadow-color);
            margin-top: 30px;
        }
        
        .prompt-output {
            background-color: white;
            border: 2px solid var(--border-color);
            box-shadow: 2px 2px 0 var(--shadow-color);
            padding: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 500px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .copy-btn {
            margin-top: 15px;
            background-color: var(--ui-warning);
            border-color: var(--border-color);
            color: var(--primary-text-color);
        }
        
        .copy-btn:hover {
            background-color: darken(var(--ui-warning), 10%);
            border-color: var(--border-color);
        }
        
        .hidden {
            display: none;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--secondary-text-color);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .row {
                flex-direction: column;
            }
            
            .col {
                margin-bottom: 15px;
            }
            
            .percentage-inputs {
                flex-direction: column;
                gap: 10px;
            }
            
            .cognitive-levels {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üìä</div>
                    <div>
                        <h1>Tr·ª£ l√Ω T·∫°o Ma tr·∫≠n ƒê·ªÅ ki·ªÉm tra</h1>
                        <div class="subtitle">Theo Ch∆∞∆°ng tr√¨nh Gi√°o d·ª•c Ph·ªï th√¥ng 2018</div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="app-description">
            <p>·ª®ng d·ª•ng n√†y gi√∫p gi√°o vi√™n t·∫°o prompt chu·∫©n ƒë·ªÉ x√¢y d·ª±ng ma tr·∫≠n ƒë·ªÅ ki·ªÉm tra theo Ch∆∞∆°ng tr√¨nh GDPT 2018. Ch·ªâ c·∫ßn ƒëi·ªÅn th√¥ng tin v√†o form d∆∞·ªõi ƒë√¢y, h·ªá th·ªëng s·∫Ω t·∫°o ra m·ªôt prompt ho√†n ch·ªânh ƒë·ªÉ s·ª≠ d·ª•ng v·ªõi c√°c c√¥ng c·ª• AI.</p>
        </div>
        
        <div class="form-container">
            <h2>Th√¥ng tin c∆° b·∫£n</h2>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="subject">M√¥n h·ªçc</label>
                        <select id="subject" required>
                            <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
                            <optgroup label="C·∫•p Trung h·ªçc c∆° s·ªü">
                                <option value="ngu_van">Ng·ªØ vƒÉn</option>
                                <option value="toan">To√°n</option>
                                <option value="ngoai_ngu">Ngo·∫°i ng·ªØ</option>
                                <option value="khtn">Khoa h·ªçc t·ª± nhi√™n</option>
                                <option value="ls_dl">L·ªãch s·ª≠ v√† ƒê·ªãa l√Ω</option>
                                <option value="gdcd">Gi√°o d·ª•c c√¥ng d√¢n</option>
                                <option value="cong_nghe">C√¥ng ngh·ªá</option>
                                <option value="tin_hoc">Tin h·ªçc</option>
                                <option value="the_duc">Gi√°o d·ª•c th·ªÉ ch·∫•t</option>
                                <option value="nghe_thuat">Ngh·ªá thu·∫≠t (√Çm nh·∫°c, M·ªπ thu·∫≠t)</option>
                                <option value="hoat_dong_trai_nghiem">Ho·∫°t ƒë·ªông tr·∫£i nghi·ªám, h∆∞·ªõng nghi·ªáp</option>
                            </optgroup>
                            <optgroup label="C·∫•p Trung h·ªçc ph·ªï th√¥ng">
                                <option value="ngu_van">Ng·ªØ vƒÉn</option>
                                <option value="toan">To√°n</option>
                                <option value="ngoai_ngu">Ngo·∫°i ng·ªØ</option>
                                <option value="vat_ly">V·∫≠t l√Ω</option>
                                <option value="hoa_hoc">H√≥a h·ªçc</option>
                                <option value="sinh_hoc">Sinh h·ªçc</option>
                                <option value="lich_su">L·ªãch s·ª≠</option>
                                <option value="dia_ly">ƒê·ªãa l√Ω</option>
                                <option value="gdcd">Gi√°o d·ª•c kinh t·∫ø v√† ph√°p lu·∫≠t</option>
                                <option value="cong_nghe">C√¥ng ngh·ªá</option>
                                <option value="tin_hoc">Tin h·ªçc</option>
                                <option value="the_duc">Gi√°o d·ª•c th·ªÉ ch·∫•t</option>
                                <option value="giao_duc_qpan">Gi√°o d·ª•c qu·ªëc ph√≤ng v√† an ninh</option>
                                <option value="nghe_thuat">Ngh·ªá thu·∫≠t (√Çm nh·∫°c, M·ªπ thu·∫≠t)</option>
                                <option value="hoat_dong_trai_nghiem">Ho·∫°t ƒë·ªông tr·∫£i nghi·ªám, h∆∞·ªõng nghi·ªáp</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="grade">L·ªõp</label>
                        <select id="grade" required>
                            <option value="">-- Ch·ªçn l·ªõp --</option>
                            <option value="6">L·ªõp 6</option>
                            <option value="7">L·ªõp 7</option>
                            <option value="8">L·ªõp 8</option>
                            <option value="9">L·ªõp 9</option>
                            <option value="10">L·ªõp 10</option>
                            <option value="11">L·ªõp 11</option>
                            <option value="12">L·ªõp 12</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="semester">H·ªçc k·ª≥</label>
                        <select id="semester" required>
                            <option value="1">H·ªçc k·ª≥ 1</option>
                            <option value="2">H·ªçc k·ª≥ 2</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="testType">H√¨nh th·ª©c ki·ªÉm tra</label>
                        <select id="testType" required>
                            <option value="giua_ky">Gi·ªØa k·ª≥</option>
                            <option value="cuoi_ky">Cu·ªëi k·ª≥</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="duration">Th·ªùi gian l√†m b√†i (ph√∫t)</label>
                        <input type="number" id="duration" min="1" value="45" required>
                    </div>
                </div>
            </div>
            
            <h2>C·∫•u tr√∫c v√† h√¨nh th·ª©c ƒë·ªÅ ki·ªÉm tra</h2>
            <div id="testStructureContainer">
                <div class="form-group">
                    <label for="testParts">T·ªâ l·ªá ƒëi·ªÉm cho c√°c ph·∫ßn (n·∫øu c√≥)</label>
                    <div class="row">
                        <div class="col">
                            <input type="text" id="part1Name" placeholder="T√™n ph·∫ßn (VD: ƒê·ªçc hi·ªÉu)">
                        </div>
                        <div class="col">
                            <input type="number" id="part1Percent" min="0" max="100" placeholder="% ƒëi·ªÉm">
                        </div>
                    </div>
                    <div class="row" style="margin-top: 10px;">
                        <div class="col">
                            <input type="text" id="part2Name" placeholder="T√™n ph·∫ßn (VD: Vi·∫øt)">
                        </div>
                        <div class="col">
                            <input type="number" id="part2Percent" min="0" max="100" placeholder="% ƒëi·ªÉm">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>H√¨nh th·ª©c c√¢u h·ªèi</label>
                    <div class="percentage-inputs">
                        <div class="col">
                            <label for="essayPercent">T·ª± lu·∫≠n (%)</label>
                            <input type="number" id="essayPercent" min="0" max="100" value="0">
                        </div>
                        <div class="col">
                            <label for="multipleChoicePercent">Tr·∫Øc nghi·ªám nhi·ªÅu l·ª±a ch·ªçn (%)</label>
                            <input type="number" id="multipleChoicePercent" min="0" max="100" value="0">
                        </div>
                        <div class="col">
                            <label for="trueFalsePercent">Tr·∫Øc nghi·ªám ƒê√∫ng/Sai (%)</label>
                            <input type="number" id="trueFalsePercent" min="0" max="100" value="0">
                        </div>
                        <div class="col">
                            <label for="shortAnswerPercent">Tr·∫Øc nghi·ªám tr·∫£ l·ªùi ng·∫Øn (%)</label>
                            <input type="number" id="shortAnswerPercent" min="0" max="100" value="0">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="specialNotes">L∆∞u √Ω ƒë·∫∑c bi·ªát</label>
                    <textarea id="specialNotes" rows="3" placeholder="Nh·∫≠p c√°c l∆∞u √Ω ƒë·∫∑c bi·ªát theo c√¥ng vƒÉn h∆∞·ªõng d·∫´n..."></textarea>
                </div>
            </div>
            
            <h2>Ph√¢n b·ªï m·ª©c ƒë·ªô nh·∫≠n th·ª©c</h2>
            <div class="percentage-inputs">
                <div class="col">
                    <label for="recognitionPercent">Nh·∫≠n bi·∫øt (%)</label>
                    <input type="number" id="recognitionPercent" min="0" max="100" value="40">
                </div>
                <div class="col">
                    <label for="understandingPercent">Th√¥ng hi·ªÉu (%)</label>
                    <input type="number" id="understandingPercent" min="0" max="100" value="30">
                </div>
                <div class="col">
                    <label for="applicationPercent">V·∫≠n d·ª•ng (%)</label>
                    <input type="number" id="applicationPercent" min="0" max="100" value="30">
                </div>
            </div>
            
            <h2>N·ªôi dung ki·∫øn th·ª©c</h2>
            <div id="topicsContainer">
                <!-- C√°c ch·ªß ƒë·ªÅ s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
            </div>
            <button type="button" id="addTopic" class="btn">+ Th√™m ch·ªß ƒë·ªÅ</button>
            
            <div class="form-group" style="margin-top: 30px;">
                <button type="button" id="generatePrompt" class="btn btn-success btn-block">T·∫°o Prompt</button>
            </div>
        </div>
        
        <div class="result-container hidden" id="resultContainer">
            <h2>Prompt ƒë√£ t·∫°o</h2>
            <p>Sao ch√©p prompt d∆∞·ªõi ƒë√¢y v√† s·ª≠ d·ª•ng v·ªõi b·∫•t k·ª≥ c√¥ng c·ª• AI n√†o ƒë·ªÉ t·∫°o ma tr·∫≠n ƒë·ªÅ ki·ªÉm tra:</p>
            <div class="prompt-output" id="promptOutput"></div>
            <button type="button" id="copyPrompt" class="btn copy-btn">Sao ch√©p Prompt</button>
        </div>
        
        <footer>
            <p>·ª®ng d·ª•ng Tr·ª£ l√Ω T·∫°o Ma tr·∫≠n ƒê·ªÅ ki·ªÉm tra - Ph√°t tri·ªÉn d·ª±a tr√™n c√°c c√¥ng vƒÉn h∆∞·ªõng d·∫´n c·ªßa B·ªô GD&ƒêT</p>
            <p>¬© 2023 - T·∫•t c·∫£ c√°c quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const topicsContainer = document.getElementById('topicsContainer');
            const addTopicButton = document.getElementById('addTopic');
            const generatePromptButton = document.getElementById('generatePrompt');
            const resultContainer = document.getElementById('resultContainer');
            const promptOutput = document.getElementById('promptOutput');
            const copyPromptButton = document.getElementById('copyPrompt');
            const subjectSelect = document.getElementById('subject');
            const gradeSelect = document.getElementById('grade');
            
            // Th√™m ch·ªß ƒë·ªÅ m·ªõi
            function addTopic() {
                const topicId = 'topic_' + Date.now();
                const topicItem = document.createElement('div');
                topicItem.className = 'topic-item';
                topicItem.innerHTML = `
                    <button type="button" class="remove-topic" data-topic="${topicId}">√ó</button>
                    <div class="form-group">
                        <label>T√™n ch·ªß ƒë·ªÅ</label>
                        <input type="text" class="topic-name" placeholder="VD: Truy·ªán ng·∫Øn, H√†m s·ªë, Ph·∫£n ·ª©ng h√≥a h·ªçc...">
                    </div>
                    <div class="cognitive-levels">
                        <div class="form-group">
                            <label>Y√™u c·∫ßu Nh·∫≠n bi·∫øt</label>
                            <textarea class="recognition-outcomes" rows="3" placeholder="Li·ªát k√™ c√°c y√™u c·∫ßu nh·∫≠n bi·∫øt..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>Y√™u c·∫ßu Th√¥ng hi·ªÉu</label>
                            <textarea class="understanding-outcomes" rows="3" placeholder="Li·ªát k√™ c√°c y√™u c·∫ßu th√¥ng hi·ªÉu..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>Y√™u c·∫ßu V·∫≠n d·ª•ng</label>
                            <textarea class="application-outcomes" rows="3" placeholder="Li·ªát k√™ c√°c y√™u c·∫ßu v·∫≠n d·ª•ng..."></textarea>
                        </div>
                    </div>
                `;
                topicsContainer.appendChild(topicItem);
                
                // Th√™m s·ª± ki·ªán x√≥a cho n√∫t x√≥a
                topicItem.querySelector('.remove-topic').addEventListener('click', function() {
                    topicsContainer.removeChild(topicItem);
                });
            }
            
            // X·ª≠ l√Ω s·ª± ki·ªán khi ch·ªçn m√¥n v√† l·ªõp ƒë·ªÉ g·ª£i √Ω c·∫•u tr√∫c
            function updateStructureSuggestions() {
                const subject = subjectSelect.value;
                const grade = gradeSelect.value;
                const essayPercent = document.getElementById('essayPercent');
                const multipleChoicePercent = document.getElementById('multipleChoicePercent');
                const specialNotes = document.getElementById('specialNotes');
                
                // Reset v·ªÅ gi√° tr·ªã m·∫∑c ƒë·ªãnh
                essayPercent.value = 0;
                multipleChoicePercent.value = 0;
                document.getElementById('trueFalsePercent').value = 0;
                document.getElementById('shortAnswerPercent').value = 0;
                specialNotes.value = '';
                
                // Thi·∫øt l·∫≠p gi√° tr·ªã m·∫∑c ƒë·ªãnh theo m√¥n v√† l·ªõp
                if (subject === 'ngu_van') {
                    essayPercent.value = 100;
                    specialNotes.value = 'M√¥n Ng·ªØ vƒÉn th·ª±c hi·ªán 100% t·ª± lu·∫≠n theo C√¥ng vƒÉn 3175/BGDƒêT-GDTrH.';
                } else if (grade === '9' && subject === 'ngu_van') {
                    essayPercent.value = 100;
                    specialNotes.value = 'M√¥n Ng·ªØ vƒÉn l·ªõp 9 THCS th·ª±c hi·ªán 100% t·ª± lu·∫≠n theo CV 1495 c·ªßa SGD Qu·∫£ng Ng√£i.';
                } else if ((grade === '10' || grade === '11') && subject !== 'ngu_van') {
                    multipleChoicePercent.value = 70;
                    essayPercent.value = 30;
                    specialNotes.value = 'L·ªõp 10, 11: Tr·∫Øc nghi·ªám 70%, T·ª± lu·∫≠n 30% theo CV 1495 c·ªßa SGD Qu·∫£ng Ng√£i.';
                } else if (grade === '12' && subject !== 'ngu_van') {
                    specialNotes.value = 'L·ªõp 12: ƒê·ªÅ ki·ªÉm tra k·∫øt h·ª£p tr·∫Øc nghi·ªám v√† t·ª± lu·∫≠n ph√π h·ª£p v·ªõi ƒëi·ªÅu ki·ªán th·ª±c t·∫ø (kh√¥ng s·ª≠ d·ª•ng h√¨nh th·ª©c tr·∫Øc nghi·ªám 100%).';
                }
            }
            
            // T·∫°o prompt t·ª´ d·ªØ li·ªáu form
            function generatePrompt() {
                // L·∫•y th√¥ng tin c∆° b·∫£n
                const subject = document.getElementById('subject').options[document.getElementById('subject').selectedIndex].text;
                const grade = document.getElementById('grade').value;
                const semester = document.getElementById('semester').value === '1' ? 'H·ªçc k·ª≥ 1' : 'H·ªçc k·ª≥ 2';
                const testType = document.getElementById('testType').value === 'giua_ky' ? 'Gi·ªØa k·ª≥' : 'Cu·ªëi k·ª≥';
                const duration = document.getElementById('duration').value;
                
                // L·∫•y th√¥ng tin c·∫•u tr√∫c ƒë·ªÅ
                const part1Name = document.getElementById('part1Name').value;
                const part1Percent = document.getElementById('part1Percent').value;
                const part2Name = document.getElementById('part2Name').value;
                const part2Percent = document.getElementById('part2Percent').value;
                
                const essayPercent = document.getElementById('essayPercent').value;
                const multipleChoicePercent = document.getElementById('multipleChoicePercent').value;
                const trueFalsePercent = document.getElementById('trueFalsePercent').value;
                const shortAnswerPercent = document.getElementById('shortAnswerPercent').value;
                const specialNotes = document.getElementById('specialNotes').value;
                
                // L·∫•y th√¥ng tin m·ª©c ƒë·ªô nh·∫≠n th·ª©c
                const recognitionPercent = document.getElementById('recognitionPercent').value;
                const understandingPercent = document.getElementById('understandingPercent').value;
                const applicationPercent = document.getElementById('applicationPercent').value;
                
                // L·∫•y th√¥ng tin c√°c ch·ªß ƒë·ªÅ
                const topicItems = document.querySelectorAll('.topic-item');
                let topicsContent = '';
                
                topicItems.forEach((item, index) => {
                    const topicName = item.querySelector('.topic-name').value;
                    const recognitionOutcomes = item.querySelector('.recognition-outcomes').value;
                    const understandingOutcomes = item.querySelector('.understanding-outcomes').value;
                    const applicationOutcomes = item.querySelector('.application-outcomes').value;
                    
                    topicsContent += `*   **Ch·ªß ƒë·ªÅ ${index + 1}: ${topicName || 'Ch∆∞a ƒë·∫∑t t√™n'}**
        *   **C√°c y√™u c·∫ßu c·∫ßn ƒë·∫°t (theo b·∫£n ƒë·∫∑c t·∫£):**
            *   M·ª©c ƒë·ªô Nh·∫≠n bi·∫øt: ${recognitionOutcomes || 'Ch∆∞a c√≥ th√¥ng tin'}
            *   M·ª©c ƒë·ªô Th√¥ng hi·ªÉu: ${understandingOutcomes || 'Ch∆∞a c√≥ th√¥ng tin'}
            *   M·ª©c ƒë·ªô V·∫≠n d·ª•ng: ${applicationOutcomes || 'Ch∆∞a c√≥ th√¥ng tin'}
        
`;
                });
                
                // X√¢y d·ª±ng prompt
                let prompt = `VAI TR√í C·ª¶A B·∫†N:
B·∫°n l√† m·ªôt chuy√™n gia gi√°o d·ª•c, c√≥ chuy√™n m√¥n s√¢u trong vi·ªác x√¢y d·ª±ng ma tr·∫≠n, b·∫£n ƒë·∫∑c t·∫£ v√† ƒë·ªÅ ki·ªÉm tra ƒë√°nh gi√° theo Ch∆∞∆°ng tr√¨nh Gi√°o d·ª•c ph·ªï th√¥ng 2018 v√† c√°c vƒÉn b·∫£n h∆∞·ªõng d·∫´n m·ªõi nh·∫•t c·ªßa B·ªô GD&ƒêT.

NHI·ªÜM V·ª§ C·ª¶A B·∫†N:
H√£y t·∫°o ra m·ªôt MA TR·∫¨N ƒê·ªÄ KI·ªÇM TRA ƒê·ªäNH K√å ho√†n ch·ªânh v√† chi ti·∫øt d·ª±a tr√™n c√°c th√¥ng tin v√† y√™u c·∫ßu c·ª• th·ªÉ ƒë∆∞·ª£c cung c·∫•p d∆∞·ªõi ƒë√¢y. Ma tr·∫≠n ph·∫£i tu√¢n th·ªß tuy·ªát ƒë·ªëi c√°c quy ƒë·ªãnh v·ªÅ chuy√™n m√¥n v√† k·ªπ thu·∫≠t.

TH√îNG TIN ƒê·∫¶U V√ÄO ƒê·ªÇ T·∫†O MA TR·∫¨N:

1.  **Th√¥ng tin chung:**
    *   **M√¥n h·ªçc:** ${subject}
    *   **L·ªõp:** ${grade}
    *   **H·ªçc k√¨:** ${semester}
    *   **H√¨nh th·ª©c ki·ªÉm tra:** ${testType}
    *   **Th·ªùi gian l√†m b√†i:** ${duration} ph√∫t

2.  **C·∫•u tr√∫c v√† h√¨nh th·ª©c ƒë·ªÅ ki·ªÉm tra:`;

// Th√™m th√¥ng tin v·ªÅ c√°c nƒÉng l·ª±c
if (part1Name && part1Percent) {
    prompt += `
    *   **C√°c nƒÉng l·ª±c c·∫ßn ƒë√°nh gi√°:**
        *   ${part1Name}: ${part1Percent}%`;
    if (part2Name && part2Percent) {
        prompt += `
        *   ${part2Name}: ${part2Percent}%`;
    }
}

prompt += `
    *   **H√¨nh th·ª©c c√¢u h·ªèi:**
        *   T·ª± lu·∫≠n: ${essayPercent}%
        *   Tr·∫Øc nghi·ªám: ${parseInt(multipleChoicePercent) + parseInt(trueFalsePercent) + parseInt(shortAnswerPercent)}% - Trong ƒë√≥:
            *   Tr·∫Øc nghi·ªám nhi·ªÅu l·ª±a ch·ªçn: ${multipleChoicePercent}%
            *   Tr·∫Øc nghi·ªám ƒê√∫ng/Sai: ${trueFalsePercent}% (M·ªói c√¢u h·ªèi ƒê√∫ng/Sai bao g·ªìm 4 √Ω nh·ªè)
            *   Tr·∫Øc nghi·ªám tr·∫£ l·ªùi ng·∫Øn: ${shortAnswerPercent}%
    *   **L∆∞u √Ω ƒë·∫∑c bi·ªát:** ${specialNotes || 'Kh√¥ng c√≥'}

3.  **Ph√¢n b·ªï m·ª©c ƒë·ªô nh·∫≠n th·ª©c (B·∫ÆT BU·ªòC):**
    *   **Nh·∫≠n bi·∫øt:** ${recognitionPercent}%
    *   **Th√¥ng hi·ªÉu:** ${understandingPercent}%
    *   **V·∫≠n d·ª•ng:** ${applicationPercent}%
    *   **T·ªïng t·ªâ l·ªá % cho Nh·∫≠n bi·∫øt + Th√¥ng hi·ªÉu:** ${parseInt(recognitionPercent) + parseInt(understandingPercent)}% (${parseInt(recognitionPercent) + parseInt(understandingPercent) === 70 ? 'ƒê·∫°t y√™u c·∫ßu 70%' : 'CH∆ØA ƒê·∫†T Y√äU C·∫¶U 70%'})
    *   **T·ªïng t·ªâ l·ªá % cho V·∫≠n d·ª•ng:** ${applicationPercent}% (${parseInt(applicationPercent) === 30 ? 'ƒê·∫°t y√™u c·∫ßu 30%' : 'CH∆ØA ƒê·∫†T Y√äU C·∫¶U 30%'})

4.  **N·ªôi dung ki·∫øn th·ª©c (C√°c ch·ªß ƒë·ªÅ/ ch∆∞∆°ng/ b√†i h·ªçc s·∫Ω ki·ªÉm tra):**
${topicsContent || '    *Ch∆∞a c√≥ th√¥ng tin v·ªÅ n·ªôi dung ki·∫øn th·ª©c*'}

Y√äU C·∫¶U ƒê·∫¶U RA - MA TR·∫¨N ƒê·ªÄ KI·ªÇM TRA:

D·ª±a tr√™n t·∫•t c·∫£ th√¥ng tin tr√™n, h√£y t·∫°o ra m·ªôt ma tr·∫≠n ƒë·ªÅ ki·ªÉm tra v·ªõi c√°c ti√™u ch√≠ sau:

1. **ƒê·ªãnh d·∫°ng:** Tr√¨nh b√†y d∆∞·ªõi d·∫°ng b·∫£ng bi·ªÉu v·ªõi c·∫•u tr√∫c nh∆∞ v√≠ d·ª• d∆∞·ªõi ƒë√¢y:

| TT | NƒÉng l·ª±c | ƒê∆°n v·ªã ki·∫øn th·ª©c | M·ª©c ƒë·ªô nh·∫≠n th·ª©c    | T·ªïng % ƒëi·ªÉm |
|---|---|---|---|---|
|    |    |    | Nh·∫≠n bi·∫øt TNKQ | Th√¥ng hi·ªÉu TNKQ | V·∫≠n d·ª•ng TNKQ | TL    |    |
| 1   | [T√™n nƒÉng l·ª±c 1] | S·ªë c√¢u | ... | ... | ... | ... | ... |
|    |    | S·ªë ƒëi·ªÉm | ... | ... | ... | ... | ... |
|    |    | T·ªâ l·ªá | ... | ... | ... | ... | ... |
| 2   | [T√™n nƒÉng l·ª±c 2] | S·ªë c√¢u | ... | ... | ... | ... | ... |
|    |    | S·ªë ƒëi·ªÉm | ... | ... | ... | ... | ... |
|    |    | T·ªâ l·ªá | ... | ... | ... | ... | ... |
| T·ªâ l·ªá c·∫•p ƒë·ªô nh·∫≠n th·ª©c |    |    | ... | ... | ... | ... | ... |

2. **N·ªôi dung:** 
   - Li·ªát k√™ ƒë·∫ßy ƒë·ªß c√°c nƒÉng l·ª±c ƒë√£ cung c·∫•p (${part1Name}${part2Name ? ` v√† ${part2Name}` : ''}) v√† v·ªõi m·ªói nƒÉng l·ª±c, chia ra c√°c d√≤ng cho S·ªë c√¢u, S·ªë ƒëi·ªÉm, T·ªâ l·ªá.
   - C·ªôt m·ª©c ƒë·ªô nh·∫≠n th·ª©c chia th√†nh: Nh·∫≠n bi·∫øt TNKQ, Th√¥ng hi·ªÉu TNKQ, V·∫≠n d·ª•ng TNKQ, TL (T·ª± lu·∫≠n).
   - Ghi r√µ s·ªë c√¢u, s·ªë ƒëi·ªÉm v√† t·ªâ l·ªá % t∆∞∆°ng ·ª©ng cho t·ª´ng √¥ trong ma tr·∫≠n. S·ªë ƒëi·ªÉm v√† t·ªâ l·ªá ph·∫£i ph√π h·ª£p v·ªõi t·ªâ l·ªá % c·ªßa nƒÉng l·ª±c ƒë√≥ v√† t·ªâ l·ªá chung c·ªßa c√°c m·ª©c ƒë·ªô nh·∫≠n th·ª©c.

3. **T·ªïng k·∫øt:** Cu·ªëi b·∫£ng ph·∫£i c√≥ h√†ng t·ªïng k·∫øt t·ªâ l·ªá c·∫•p ƒë·ªô nh·∫≠n th·ª©c.

L∆∞u √Ω: B·∫£ng ma tr·∫≠n ph·∫£i ƒë·∫£m b·∫£o t·ªïng t·ªâ l·ªá % ƒëi·ªÉm cho c√°c m·ª©c ƒë·ªô nh·∫≠n th·ª©c l√† 100% v√† ph√π h·ª£p v·ªõi y√™u c·∫ßu ƒë·∫ßu v√†o (70% Nh·∫≠n bi·∫øt+Th√¥ng hi·ªÉu, 30% V·∫≠n d·ª•ng).

H√ÉY B·∫ÆT ƒê·∫¶U T·∫†O MA TR·∫¨N CHO T√îI NGAY B√ÇY GI·ªú.`;
                
                // Hi·ªÉn th·ªã prompt
                promptOutput.textContent = prompt;
                resultContainer.classList.remove('hidden');
                
                // Cu·ªôn ƒë·∫øn k·∫øt qu·∫£
                resultContainer.scrollIntoView({ behavior: 'smooth' });
            }
            
            // Sao ch√©p prompt
            function copyPromptToClipboard() {
                const textArea = document.createElement('textarea');
                textArea.value = promptOutput.textContent;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                // Th√¥ng b√°o ƒë√£ sao ch√©p
                const originalText = copyPromptButton.textContent;
                copyPromptButton.textContent = 'ƒê√£ sao ch√©p!';
                setTimeout(() => {
                    copyPromptButton.textContent = originalText;
                }, 2000);
            }
            
            // G·∫Øn s·ª± ki·ªán
            addTopicButton.addEventListener('click', addTopic);
            generatePromptButton.addEventListener('click', generatePrompt);
            copyPromptButton.addEventListener('click', copyPromptToClipboard);
            subjectSelect.addEventListener('change', updateStructureSuggestions);
            gradeSelect.addEventListener('change', updateStructureSuggestions);
            
            // Th√™m m·ªôt ch·ªß ƒë·ªÅ m·∫∑c ƒë·ªãnh khi t·∫£i trang
            addTopic();
        });
    </script>
</body>
</html>
